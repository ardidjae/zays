{# templates/bail/ajouterBail.html.twig #}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block title %}ZAYS{% endblock %}</title>

    {# Inclure les stylesheets Bootstrap (assurez-vous d'avoir Bootstrap installé dans votre projet) #}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    {% block stylesheets %}
    <style>
            .Locataire {
                display: flex;
                justify-content: space-between; /* Ajoutez ceci pour l'espacement entre les formulaires */
            }
            .locataire-form {
                width: 48%; /* Ajoutez ceci pour définir la largeur du formulaire */
            }
        </style>
    {% endblock %}

    {% block javascripts %}
         <script>
            document.addEventListener('DOMContentLoaded', function() {
                const addButton = document.getElementById('addLocataireButton');
                const locataireContainer = document.getElementById('locataireContainer');
                const locataireTemplate = document.getElementById('locataireTemplate');
                let locataireIndex = 1; // Initial index for locataire fields

                addButton.addEventListener('click', function() {
                    const newLocataire = locataireTemplate.cloneNode(true);
                    newLocataire.removeAttribute('id');

                    // Update field names with unique index
                    newLocataire.querySelectorAll('[name]').forEach(function(element) {
                        const name = element.getAttribute('name');
                        element.setAttribute('name', name.replace('[0]', '[' + locataireIndex + ']'));
                    });

                    locataireContainer.appendChild(newLocataire);
                    locataireIndex++;
                });
            });
        </script>
    {% endblock %}
</head>
<body>

    {% include 'header.html.twig' %}

    <div class="container my-4">
        <div class="d-flex justify-content-center align-items-center mb-3">
            <h5 class="text-center">CREER UN CONTRAT DE LOCATION</h5>
        </div>

        {{ form_start(form) }}

        <h3>Locataire</h3>
        <div id="locataireContainer" class="Locataire">
            <div class="locataire-form" id="locataireTemplate">
                {% for locataire in form.locataires %}
                <div class="mb-3">
                    <div class="form-group">
                        {{ form_row(locataire.Nom, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-group">
                        {{ form_row(locataire.Prenom, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-group">
                        {{ form_row(locataire.DateNaissance, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-group">
                        {{ form_row(locataire.LieuNaissance, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-group">
                        {{ form_row(locataire.MontantCaf, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-group">
                        {{ form_row(locataire.Archive, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        <button type="button" id="addLocataireButton" class="btn btn-primary">Ajouter un autre locataire</button>
        </br>
        <h3>Bail</h3>
        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.appartement, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.dateDebut, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.MontantHC, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.MontantCharges, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.MontantPremEcheance, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.MontantDerEcheance, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.NomCaution1, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.NomCaution2, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.MontantCaution, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.DateFin, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.DureeBail, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.BailSigne, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.EtatLieuEntree, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.EtatLieuSortie, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.AttestationAssurance, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.TrimestreReference, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.associe, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.PieceJustificative, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="mb-3">
            <div class="form-group">
                {{ form_row(form.Archive, {'attr': {'class': 'form-control'}}) }}
            </div>
        </div>
        {{ form_end(form) }}
    </div>
</body>
</html>
